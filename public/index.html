<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>After Dark Games ğŸŒ™</title>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/platform.css">
</head>
<body>
  <header class="hero">
    <h1 class="logo">ğŸŒ™ After Dark Games</h1>
    <p class="tagline">Party games for grown-ups â€” no kids allowed.</p>
  </header>

  <main class="game-grid" id="gameGrid">
    <p class="loading">Loading gamesâ€¦</p>
  </main>

  <footer>
    <p>18+ only Â· Built with â¤ï¸ and poor life choices</p>
  </footer>

  <script>
    const ICONS = {
      'scribble':       'ğŸ¨',
      'truth-or-tease': 'ğŸ’‹',
      'this-or-that':   'ğŸ¤”',
      'scenario':       'ğŸ­',
      'confessions':    'ğŸ¤«'
    };

    const COLORS = {
      'scribble':       '#a855f7',
      'truth-or-tease': '#ec4899',
      'this-or-that':   '#8b5cf6',
      'scenario':       '#fbbf24',
      'confessions':    '#22c55e'
    };

    async function loadGames() {
      try {
        const res = await fetch('/api/games');
        const games = await res.json();
        const grid = document.getElementById('gameGrid');
        grid.innerHTML = '';

        games.forEach(game => {
          const color = COLORS[game.id] || '#a855f7';
          const icon = ICONS[game.id] || 'ğŸ®';
          const card = document.createElement('a');
          card.href = game.route;
          card.className = 'game-card';
          card.style.setProperty('--card-accent', color);
          card.innerHTML = `
            <div class="card-icon">${icon}</div>
            <h2 class="card-title">${game.name}</h2>
            <p class="card-desc">${game.description}</p>
            <div class="card-meta">
              <span class="meta-badge">${game.type}</span>
              <span class="meta-players">${game.minPlayers}â€“${game.maxPlayers} players</span>
            </div>
          `;
          grid.appendChild(card);
        });
      } catch (err) {
        document.getElementById('gameGrid').innerHTML =
          '<p class="loading">Could not load games. Try refreshing.</p>';
      }
    }

    loadGames();
  </script>
</body>
</html>
