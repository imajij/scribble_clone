<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>After Dark Games &#x1F319;</title>
  <link rel="stylesheet" href="/shared/theme.css">
  <link rel="stylesheet" href="/platform.css">
</head>
<body>

  <!-- ── Navbar (shared, always visible) ── -->
  <nav class="navbar" id="navbar"></nav>

  <!-- ── Age Gate (shared, shown once) ── -->
  <div class="age-overlay hidden" id="age-gate">
    <div class="age-card">
      <div class="age-icon">&#x1F51E;</div>
      <h1>After Dark Games</h1>
      <p class="tagline">Party games for grown-ups</p>
      <p class="age-text">This platform contains adult-themed content.<br>You must be 18+ to enter.</p>
      <button class="age-btn age-btn-confirm" id="age-confirm-btn">I'm 18+ &#x2014; Let Me In</button>
      <button class="age-btn age-btn-deny" id="age-deny-btn">I'm Under 18</button>
    </div>
  </div>

  <!-- ── Game container (dynamic content loaded here) ── -->
  <div id="game-container"></div>

  <!-- ── Socket.IO (shared, always available) ── -->
  <script src="/socket.io/socket.io.js"></script>

  <!-- ── SPA Router (ES module) ── -->
  <script type="module" src="/router.js"></script>

  <!-- ── Hot-reload (dev only — no-ops in production) ── -->
  <script>
    (function () {
      const devSocket = io('/platform');
      let connected = false;
      devSocket.on('connect', function () {
        if (connected) {
          // Server restarted — reconnected after a nodemon reload
          console.log('[hot-reload] server restarted, reloading…');
          location.reload();
        }
        connected = true;
      });
      devSocket.on('hotReload', function (data) {
        console.log('[hot-reload] file changed:', data.file, '— reloading…');
        location.reload();
      });
    })();
  </script>
</body>
</html>
